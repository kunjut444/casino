<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∞ –ú–∏–Ω–∏ –ö–∞–∑–∏–Ω–æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        #root {
            min-height: 100vh;
        }

        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .auth-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
        }

        .auth-card h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
            font-size: 28px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .auth-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .auth-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .auth-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .auth-link {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }

        .auth-link a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .auth-link a:hover {
            text-decoration: underline;
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 14px;
        }

        .dashboard {
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard-header {
            background: white;
            border-radius: 20px;
            padding: 20px 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .dashboard-header h1 {
            color: #333;
            font-size: 32px;
            margin: 0;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .balance {
            display: flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 12px 24px;
            border-radius: 15px;
            color: white;
            font-weight: 600;
        }

        .balance-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .balance-amount {
            font-size: 20px;
        }

        .username {
            font-size: 16px;
            color: #555;
            font-weight: 500;
        }

        .logout-button {
            padding: 10px 20px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .logout-button:hover {
            background: #ff3838;
        }

        .bet-result {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            animation: slideIn 0.3s ease-out;
        }

        .bet-result.win {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .bet-result.lose {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .bet-result h3 {
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .bet-result p {
            margin: 0;
            font-size: 18px;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dashboard-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        @media (max-width: 1024px) {
            .dashboard-content {
                grid-template-columns: 1fr;
            }
        }

        .bet-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .bet-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .bet-type-selector button {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .bet-type-selector button:hover {
            border-color: #667eea;
            color: #667eea;
        }

        .bet-type-selector button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .bet-component-container {
            min-height: 400px;
        }

        .history-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-height: 600px;
            overflow-y: auto;
        }

        .bet-container {
            width: 100%;
        }

        .bet-container h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .bet-description {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .bet-form {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .choice-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .choice-button {
            flex: 1;
            padding: 20px;
            border: 3px solid #e0e0e0;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            font-size: 20px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .choice-button:hover:not(:disabled) {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
        }

        .choice-button.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .choice-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            background: #fafafa;
        }

        .number-button {
            aspect-ratio: 1;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            color: #333;
            transition: all 0.2s;
        }

        .number-button:hover:not(:disabled) {
            border-color: #667eea;
            background: #f0f4ff;
            transform: scale(1.05);
        }

        .number-button.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .number-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .emoji-button {
            aspect-ratio: 1;
            border: 3px solid #e0e0e0;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            font-size: 48px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emoji-button:hover:not(:disabled) {
            border-color: #667eea;
            transform: scale(1.1) rotate(5deg);
        }

        .emoji-button.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
            transform: scale(1.15);
        }

        .emoji-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .amount-input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .amount-input-group label {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }

        .amount-input-group input {
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 18px;
            transition: border-color 0.3s;
        }

        .amount-input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .quick-amounts {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-amounts button {
            flex: 1;
            min-width: 80px;
            padding: 10px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            transition: all 0.2s;
        }

        .quick-amounts button:hover:not(:disabled) {
            border-color: #667eea;
            color: #667eea;
            background: #f0f4ff;
        }

        .quick-amounts button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .submit-bet-button {
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .submit-bet-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .submit-bet-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .bet-history {
            width: 100%;
        }

        .bet-history h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .empty-history {
            text-align: center;
            color: #999;
            padding: 40px;
            font-size: 16px;
        }

        .bet-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .bet-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            border-left: 4px solid #e0e0e0;
            transition: transform 0.2s;
        }

        .bet-item:hover {
            transform: translateX(5px);
        }

        .bet-item.win {
            border-left-color: #38ef7d;
            background: #f0fff4;
        }

        .bet-item.lose {
            border-left-color: #ff4757;
            background: #fff5f5;
        }

        .bet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .bet-type {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            font-weight: 600;
        }

        .bet-status {
            font-size: 14px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 6px;
        }

        .bet-status.win {
            color: #11998e;
            background: #d4f4e8;
        }

        .bet-status.lose {
            color: #c33;
            background: #ffe0e0;
        }

        .bet-details {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .bet-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-size: 14px;
            color: #555;
        }

        .bet-info strong {
            color: #333;
        }

        .bet-win {
            margin-top: 5px;
            padding-top: 8px;
            border-top: 1px solid #e0e0e0;
            font-size: 16px;
            color: #11998e;
            font-weight: 600;
        }

        .bet-win strong {
            font-size: 18px;
        }

        @media (max-width: 768px) {
            .number-grid {
                grid-template-columns: repeat(4, 1fr);
            }

            .emoji-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React –∏ ReactDOM —á–µ—Ä–µ–∑ CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel –¥–ª—è JSX —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
        const BetType = {
            EVEN_ODD: 'EVEN_ODD',
            NUMBER_ROULETTE: 'NUMBER_ROULETTE',
            EMOJI_ROULETTE: 'EMOJI_ROULETTE'
        };

        const API_BASE_URL = '/api';

        // API —Å–µ—Ä–≤–∏—Å—ã
        const apiCall = async (url, method = 'GET', data = null) => {
            const options = {
                method,
                headers: {
                    'Content-Type': 'application/json',
                },
            };
            if (data) {
                options.body = JSON.stringify(data);
            }
            const response = await fetch(`${API_BASE_URL}${url}`, options);
            if (!response.ok) {
                const error = await response.json().catch(() => ({ message: '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞' }));
                throw { response: { data: error } };
            }
            return response.json();
        };

        const authService = {
            login: (credentials) => apiCall('/auth/login', 'POST', credentials),
            register: (data) => apiCall('/auth/register', 'POST', data),
        };

        const betService = {
            makeBet: (betRequest) => apiCall('/bets', 'POST', betRequest),
        };

        // Auth Context
        const AuthContext = createContext();

        const AuthProvider = ({ children }) => {
            const [player, setPlayer] = useState(null);

            useEffect(() => {
                const savedPlayer = localStorage.getItem('player');
                if (savedPlayer) {
                    setPlayer(JSON.parse(savedPlayer));
                }
            }, []);

            const login = async (username, password) => {
                const playerData = await authService.login({ username, password });
                setPlayer(playerData);
                localStorage.setItem('player', JSON.stringify(playerData));
            };

            const register = async (username, password) => {
                const playerData = await authService.register({ username, password });
                setPlayer(playerData);
                localStorage.setItem('player', JSON.stringify(playerData));
            };

            const logout = () => {
                setPlayer(null);
                localStorage.removeItem('player');
            };

            const updateBalance = (newBalance) => {
                if (player) {
                    const updatedPlayer = { ...player, balance: newBalance };
                    setPlayer(updatedPlayer);
                    localStorage.setItem('player', JSON.stringify(updatedPlayer));
                }
            };

            return (
                <AuthContext.Provider value={{ player, login, register, logout, updateBalance }}>
                    {children}
                </AuthContext.Provider>
            );
        };

        const useAuth = () => {
            const context = useContext(AuthContext);
            if (!context) {
                throw new Error('useAuth must be used within an AuthProvider');
            }
            return context;
        };

        // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
        const Login = () => {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            const { login } = useAuth();
            const [showRegister, setShowRegister] = useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);
                try {
                    await login(username, password);
                } catch (err) {
                    setError(err.response?.data?.message || '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ.');
                } finally {
                    setLoading(false);
                }
            };

            if (showRegister) {
                return <Register onSwitch={() => setShowRegister(false)} />;
            }

            return (
                <div className="auth-container">
                    <div className="auth-card">
                        <h2>–í—Ö–æ–¥ –≤ –∫–∞–∑–∏–Ω–æ</h2>
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                                <input
                                    type="text"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    required
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                                />
                            </div>
                            <div className="form-group">
                                <label>–ü–∞—Ä–æ–ª—å</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    required
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                                />
                            </div>
                            {error && <div className="error-message">{error}</div>}
                            <button type="submit" disabled={loading} className="auth-button">
                                {loading ? '–í—Ö–æ–¥...' : '–í–æ–π—Ç–∏'}
                            </button>
                            <div className="auth-link">
                                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a onClick={() => setShowRegister(true)}>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        const Register = ({ onSwitch }) => {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            const { register } = useAuth();

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);
                try {
                    await register(username, password);
                } catch (err) {
                    setError(err.response?.data?.message || '–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.');
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="auth-container">
                    <div className="auth-card">
                        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                                <input
                                    type="text"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    required
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                                />
                            </div>
                            <div className="form-group">
                                <label>–ü–∞—Ä–æ–ª—å</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    required
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                                />
                            </div>
                            {error && <div className="error-message">{error}</div>}
                            <button type="submit" disabled={loading} className="auth-button">
                                {loading ? '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...' : '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è'}
                            </button>
                            <div className="auth-link">
                                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a onClick={onSwitch}>–í–æ–π—Ç–∏</a>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        const EvenOddBet = ({ onBet, loading, playerBalance }) => {
            const [amount, setAmount] = useState('');
            const [selectedChoice, setSelectedChoice] = useState(null);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!selectedChoice || !amount) {
                    alert('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –∏ –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏');
                    return;
                }
                const betAmount = parseFloat(amount);
                if (betAmount <= 0 || betAmount > playerBalance) {
                    alert('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞ —Å—Ç–∞–≤–∫–∏');
                    return;
                }
                onBet({
                    betType: BetType.EVEN_ODD,
                    amount: betAmount,
                    choose: selectedChoice,
                });
                setAmount('');
                setSelectedChoice(null);
            };

            return (
                <div className="bet-container">
                    <h2>–ß–µ—Ç–Ω–æ–µ / –ù–µ—á–µ—Ç–Ω–æ–µ</h2>
                    <p className="bet-description">
                        –í—ã–±–µ—Ä–∏—Ç–µ —á–µ—Ç–Ω–æ–µ –∏–ª–∏ –Ω–µ—á–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ. –ï—Å–ª–∏ —É–≥–∞–¥–∞–µ—Ç–µ, –≤—ã–∏–≥—Ä–∞–µ—Ç–µ —É–¥–≤–æ–µ–Ω–Ω—É—é —Å—Ç–∞–≤–∫—É!
                    </p>
                    <form onSubmit={handleSubmit} className="bet-form">
                        <div className="choice-buttons">
                            <button
                                type="button"
                                className={`choice-button ${selectedChoice === 'EVEN' ? 'selected' : ''}`}
                                onClick={() => setSelectedChoice('EVEN')}
                                disabled={loading}
                            >
                                –ß–µ—Ç–Ω–æ–µ
                            </button>
                            <button
                                type="button"
                                className={`choice-button ${selectedChoice === 'ODD' ? 'selected' : ''}`}
                                onClick={() => setSelectedChoice('ODD')}
                                disabled={loading}
                            >
                                –ù–µ—á–µ—Ç–Ω–æ–µ
                            </button>
                        </div>
                        <div className="amount-input-group">
                            <label>–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏</label>
                            <input
                                type="number"
                                value={amount}
                                onChange={(e) => setAmount(e.target.value)}
                                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É"
                                min="1"
                                max={playerBalance}
                                step="0.01"
                                required
                                disabled={loading}
                            />
                            <div className="quick-amounts">
                                <button type="button" onClick={() => setAmount((playerBalance * 0.25).toFixed(2))} disabled={loading}>25%</button>
                                <button type="button" onClick={() => setAmount((playerBalance * 0.5).toFixed(2))} disabled={loading}>50%</button>
                                <button type="button" onClick={() => setAmount((playerBalance * 0.75).toFixed(2))} disabled={loading}>75%</button>
                                <button type="button" onClick={() => setAmount(playerBalance.toFixed(2))} disabled={loading}>–í—Å–µ</button>
                            </div>
                        </div>
                        <button type="submit" disabled={loading || !selectedChoice || !amount} className="submit-bet-button">
                            {loading ? '–°—Ç–∞–≤–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è...' : '–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É'}
                        </button>
                    </form>
                </div>
            );
        };

        const NumberRouletteBet = ({ onBet, loading, playerBalance }) => {
            const [amount, setAmount] = useState('');
            const [selectedNumber, setSelectedNumber] = useState(null);
            const numbers = Array.from({ length: 36 }, (_, i) => i + 1);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (selectedNumber === null || !amount) {
                    alert('–í—ã–±–µ—Ä–∏—Ç–µ —á–∏—Å–ª–æ –∏ –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏');
                    return;
                }
                const betAmount = parseFloat(amount);
                if (betAmount <= 0 || betAmount > playerBalance) {
                    alert('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞ —Å—Ç–∞–≤–∫–∏');
                    return;
                }
                onBet({
                    betType: BetType.NUMBER_ROULETTE,
                    amount: betAmount,
                    choose: selectedNumber.toString(),
                });
                setAmount('');
                setSelectedNumber(null);
            };

            return (
                <div className="bet-container">
                    <h2>–ß–∏—Å–ª–æ–≤–∞—è –†—É–ª–µ—Ç–∫–∞</h2>
                    <p className="bet-description">
                        –í—ã–±–µ—Ä–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 36. –ï—Å–ª–∏ —É–≥–∞–¥–∞–µ—Ç–µ, –≤—ã–∏–≥—Ä–∞–µ—Ç–µ –≤ 35 —Ä–∞–∑ –±–æ–ª—å—à–µ —Å—Ç–∞–≤–∫–∏!
                    </p>
                    <form onSubmit={handleSubmit} className="bet-form">
                        <div className="number-grid">
                            {numbers.map((num) => (
                                <button
                                    key={num}
                                    type="button"
                                    className={`number-button ${selectedNumber === num ? 'selected' : ''}`}
                                    onClick={() => setSelectedNumber(num)}
                                    disabled={loading}
                                >
                                    {num}
                                </button>
                            ))}
                        </div>
                        <div className="amount-input-group">
                            <label>–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏</label>
                            <input
                                type="number"
                                value={amount}
                                onChange={(e) => setAmount(e.target.value)}
                                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É"
                                min="1"
                                max={playerBalance}
                                step="0.01"
                                required
                                disabled={loading}
                            />
                            <div className="quick-amounts">
                                <button type="button" onClick={() => setAmount((playerBalance * 0.25).toFixed(2))} disabled={loading}>25%</button>
                                <button type="button" onClick={() => setAmount((playerBalance * 0.5).toFixed(2))} disabled={loading}>50%</button>
                                <button type="button" onClick={() => setAmount((playerBalance * 0.75).toFixed(2))} disabled={loading}>75%</button>
                                <button type="button" onClick={() => setAmount(playerBalance.toFixed(2))} disabled={loading}>–í—Å–µ</button>
                            </div>
                        </div>
                        <button type="submit" disabled={loading || selectedNumber === null || !amount} className="submit-bet-button">
                            {loading ? '–°—Ç–∞–≤–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è...' : '–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É'}
                        </button>
                    </form>
                </div>
            );
        };

        const EmojiRouletteBet = ({ onBet, loading, playerBalance }) => {
            const [amount, setAmount] = useState('');
            const [selectedEmoji, setSelectedEmoji] = useState(null);
            const emojis = [
                { emoji: 'üé∞', name: '–°–ª–æ—Ç' },
                { emoji: 'üé≤', name: '–ö—É–±–∏–∫' },
                { emoji: 'üÉè', name: '–î–∂–æ–∫–µ—Ä' },
                { emoji: 'üéØ', name: '–ú–∏—à–µ–Ω—å' },
                { emoji: 'üé™', name: '–¶–∏—Ä–∫' },
                { emoji: 'üé®', name: '–ü–∞–ª–∏—Ç—Ä–∞' },
                { emoji: 'üé≠', name: '–ú–∞—Å–∫–∞' },
                { emoji: 'üé™', name: '–®–∞—Ç–µ—Ä' },
            ];

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!selectedEmoji || !amount) {
                    alert('–í—ã–±–µ—Ä–∏—Ç–µ —ç–º–æ–¥–∑–∏ –∏ –≤–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Å—Ç–∞–≤–∫–∏');
                    return;
                }
                const betAmount = parseFloat(amount);
                if (betAmount <= 0 || betAmount > playerBalance) {
                    alert('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞ —Å—Ç–∞–≤–∫–∏');
                    return;
                }
                onBet({
                    betType: BetType.EMOJI_ROULETTE,
                    amount: betAmount,
                    choose: selectedEmoji,
                });
                setAmount('');
                setSelectedEmoji(null);
            };

            return (
                <div className="bet-container">
                    <h2>–≠–º–æ–¥–∑–∏ –†—É–ª–µ—Ç–∫–∞</h2>
                    <p className="bet-description">
                        –í—ã–±–µ—Ä–∏—Ç–µ —ç–º–æ–¥–∑–∏. –ï—Å–ª–∏ —É–≥–∞–¥–∞–µ—Ç–µ, –≤—ã–∏–≥—Ä–∞–µ—Ç–µ –≤ 7 —Ä–∞–∑ –±–æ–ª—å—à–µ —Å—Ç–∞–≤–∫–∏!
                    </p>
                    <form onSubmit={handleSubmit} className="bet-form">
                        <div className="emoji-grid">
                            {emojis.map((item) => (
                                <button
                                    key={item.emoji}
                                    type="button"
                                    className={`emoji-button ${selectedEmoji === item.emoji ? 'selected' : ''}`}
                                    onClick={() => setSelectedEmoji(item.emoji)}
                                    disabled={loading}
                                    title={item.name}
                                >
                                    {item.emoji}
                                </button>
                            ))}
                        </div>
                        <div className="amount-input-group">
                            <label>–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏</label>
                            <input
                                type="number"
                                value={amount}
                                onChange={(e) => setAmount(e.target.value)}
                                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É"
                                min="1"
                                max={playerBalance}
                                step="0.01"
                                required
                                disabled={loading}
                            />
                            <div className="quick-amounts">
                                <button type="button" onClick={() => setAmount((playerBalance * 0.25).toFixed(2))} disabled={loading}>25%</button>
                                <button type="button" onClick={() => setAmount((playerBalance * 0.5).toFixed(2))} disabled={loading}>50%</button>
                                <button type="button" onClick={() => setAmount((playerBalance * 0.75).toFixed(2))} disabled={loading}>75%</button>
                                <button type="button" onClick={() => setAmount(playerBalance.toFixed(2))} disabled={loading}>–í—Å–µ</button>
                            </div>
                        </div>
                        <button type="submit" disabled={loading || !selectedEmoji || !amount} className="submit-bet-button">
                            {loading ? '–°—Ç–∞–≤–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è...' : '–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É'}
                        </button>
                    </form>
                </div>
            );
        };

        const BetHistory = ({ bets }) => {
            if (bets.length === 0) {
                return (
                    <div className="bet-history">
                        <h2>–ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫</h2>
                        <p className="empty-history">–°—Ç–∞–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    </div>
                );
            }

            return (
                <div className="bet-history">
                    <h2>–ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫</h2>
                    <div className="bet-list">
                        {bets.map((bet) => (
                            <div key={bet.id} className={`bet-item ${bet.isWin ? 'win' : 'lose'}`}>
                                <div className="bet-header">
                                    <span className="bet-type">{bet.bet}</span>
                                    <span className={`bet-status ${bet.isWin ? 'win' : 'lose'}`}>
                                        {bet.isWin ? '‚úì –í—ã–∏–≥—Ä—ã—à' : '‚úó –ü—Ä–æ–∏–≥—Ä—ã—à'}
                                    </span>
                                </div>
                                <div className="bet-details">
                                    <div className="bet-info">
                                        <span>–í—ã–±–æ—Ä: <strong>{bet.choose}</strong></span>
                                        <span>–°—Ç–∞–≤–∫–∞: <strong>${bet.amount.toFixed(2)}</strong></span>
                                    </div>
                                    {bet.isWin && (
                                        <div className="bet-win">
                                            –í—ã–∏–≥—Ä—ã—à: <strong>${bet.winMoney.toFixed(2)}</strong>
                                        </div>
                                    )}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const Dashboard = () => {
            const { player, logout, updateBalance } = useAuth();
            const [selectedBetType, setSelectedBetType] = useState(BetType.EVEN_ODD);
            const [betHistory, setBetHistory] = useState([]);
            const [loading, setLoading] = useState(false);
            const [lastBetResult, setLastBetResult] = useState(null);

            if (!player) {
                return null;
            }

            const handleBet = async (betRequest) => {
                if (!player) return;
                setLoading(true);
                try {
                    const fullBetRequest = {
                        ...betRequest,
                        playerId: player.id,
                    };
                    const result = await betService.makeBet(fullBetRequest);
                    setLastBetResult(result);
                    if (result.isWin) {
                        updateBalance(player.balance + result.winMoney - result.amount);
                    } else {
                        updateBalance(player.balance - result.amount);
                    }
                    setBetHistory([result, ...betHistory]);
                } catch (error) {
                    alert(error.response?.data?.message || '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ —Å—Ç–∞–≤–∫–∏');
                } finally {
                    setLoading(false);
                }
            };

            const renderBetComponent = () => {
                switch (selectedBetType) {
                    case BetType.EVEN_ODD:
                        return <EvenOddBet onBet={handleBet} loading={loading} playerBalance={player.balance} />;
                    case BetType.NUMBER_ROULETTE:
                        return <NumberRouletteBet onBet={handleBet} loading={loading} playerBalance={player.balance} />;
                    case BetType.EMOJI_ROULETTE:
                        return <EmojiRouletteBet onBet={handleBet} loading={loading} playerBalance={player.balance} />;
                    default:
                        return null;
                }
            };

            return (
                <div className="dashboard">
                    <header className="dashboard-header">
                        <div className="header-content">
                            <h1>üé∞ –ú–∏–Ω–∏ –ö–∞–∑–∏–Ω–æ</h1>
                            <div className="user-info">
                                <div className="balance">
                                    <span className="balance-label">–ë–∞–ª–∞–Ω—Å:</span>
                                    <span className="balance-amount">${player.balance.toFixed(2)}</span>
                                </div>
                                <div className="username">üë§ {player.username}</div>
                                <button onClick={logout} className="logout-button">
                                    –í—ã–π—Ç–∏
                                </button>
                            </div>
                        </div>
                    </header>

                    {lastBetResult && (
                        <div className={`bet-result ${lastBetResult.isWin ? 'win' : 'lose'}`}>
                            {lastBetResult.isWin ? (
                                <div>
                                    <h3>üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!</h3>
                                    <p>–í—ã–∏–≥—Ä—ã—à: ${lastBetResult.winMoney.toFixed(2)}</p>
                                </div>
                            ) : (
                                <div>
                                    <h3>üòî –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏</h3>
                                    <p>–°—Ç–∞–≤–∫–∞: ${lastBetResult.amount.toFixed(2)}</p>
                                </div>
                            )}
                        </div>
                    )}

                    <div className="dashboard-content">
                        <div className="bet-section">
                            <div className="bet-type-selector">
                                <button
                                    className={selectedBetType === BetType.EVEN_ODD ? 'active' : ''}
                                    onClick={() => setSelectedBetType(BetType.EVEN_ODD)}
                                >
                                    –ß–µ—Ç/–ù–µ—á–µ—Ç
                                </button>
                                <button
                                    className={selectedBetType === BetType.NUMBER_ROULETTE ? 'active' : ''}
                                    onClick={() => setSelectedBetType(BetType.NUMBER_ROULETTE)}
                                >
                                    –ß–∏—Å–ª–æ–≤–∞—è –†—É–ª–µ—Ç–∫–∞
                                </button>
                                <button
                                    className={selectedBetType === BetType.EMOJI_ROULETTE ? 'active' : ''}
                                    onClick={() => setSelectedBetType(BetType.EMOJI_ROULETTE)}
                                >
                                    –≠–º–æ–¥–∑–∏ –†—É–ª–µ—Ç–∫–∞
                                </button>
                            </div>
                            <div className="bet-component-container">
                                {renderBetComponent()}
                            </div>
                        </div>
                        <div className="history-section">
                            <BetHistory bets={betHistory} />
                        </div>
                    </div>
                </div>
            );
        };

        // –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç App
        const App = () => {
            const { player } = useAuth();
            return player ? <Dashboard /> : <Login />;
        };

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <AuthProvider>
                <App />
            </AuthProvider>
        );
    </script>
</body>
</html>

